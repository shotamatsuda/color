!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.Color={})}(this,function(t){"use strict";function n(t,n){return n={exports:{}},t(n,n.exports),n.exports}function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}function o(t){return decodeURIComponent(t.replace(/\+/g," "))}function i(t){var n,e={},r=void 0===(t=t||O.location||{})?"undefined":F(t);if("blob:"===t.protocol)e=new s(unescape(t.pathname),{});else if("string"===r){e=new s(t,{});for(n in it)delete e[n]}else if("object"===r){for(n in t)n in it||(e[n]=t[n]);void 0===e.slashes&&(e.slashes=rt.test(t.href))}return e}function u(t){var n=et.exec(t);return{protocol:n[1]?n[1].toLowerCase():"",slashes:!!n[2],rest:n[3]}}function a(t,n){for(var e=(n||"/").split("/").slice(0,-1).concat(t.split("/")),r=e.length,o=e[r-1],i=!1,u=0;r--;)"."===e[r]?e.splice(r,1):".."===e[r]?(e.splice(r,1),u++):u&&(0===r&&(i=!0),e.splice(r,1),u--);return i&&e.unshift(""),"."!==o&&".."!==o||e.push(""),e.join("/")}function s(t,n,e){if(!(this instanceof s))return new s(t,n,e);var r,o,c,f,h,l,y=ot.slice(),p=void 0===n?"undefined":F(n),v=this,g=0;for("object"!==p&&"string"!==p&&(e=n,n=null),e&&"function"!=typeof e&&(e=nt.parse),n=i(n),r=!(o=u(t||"")).protocol&&!o.slashes,v.slashes=o.slashes||r&&n.slashes,v.protocol=o.protocol||n.protocol||"",t=o.rest,o.slashes||(y[2]=[/(.*)/,"pathname"]);g<y.length;g++)c=(f=y[g])[0],l=f[1],c!==c?v[l]=t:"string"==typeof c?~(h=t.indexOf(c))&&("number"==typeof f[2]?(v[l]=t.slice(0,h),t=t.slice(h+f[2])):(v[l]=t.slice(h),t=t.slice(0,h))):(h=c.exec(t))&&(v[l]=h[1],t=t.slice(0,h.index)),v[l]=v[l]||(r&&f[3]?n[l]||"":""),f[4]&&(v[l]=v[l].toLowerCase());e&&(v.query=e(v.query)),r&&n.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==n.pathname)&&(v.pathname=a(v.pathname,n.pathname)),$(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(f=v.auth.split(":"),v.username=f[0]||"",v.password=f[1]||""),v.origin=v.protocol&&v.host&&"file:"!==v.protocol?v.protocol+"//"+v.host:"null",v.href=v.toString()}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=Symbol(t);return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return void 0===t[n]&&(t[n]=e({})),t[n]}}function f(t){this.message=t}function h(t){this.message=t}function l(t,n){return new Promise(function(e,r){var o=new At(t,!0);n.query&&o.set("query",Object.assign({},o.query,n.query));var i=new XMLHttpRequest;i.open("get",o.toString(),!0),n.headers&&Object.entries(n.headers).forEach(function(t){i.setRequestHeader.apply(i,Y(t))}),i.responseType=n.type,i.addEventListener("loadend",function(t){i.status<200||i.status>=300?r(i.status):null!==i.response||"json"!==n.type?e(i.response):r(new Error("Could not parse JSON"))},!1),i.send()})}function y(t,n){return n.local?new Promise(function(e,r){Bt(t,n.encoding,function(t,n){t?r(t):e(n)})}):new Promise(function(e,r){St({url:t,headers:n.headers||{},qs:n.query||{},encoding:n.encoding},function(t,n){t?r(t):((n.statusCode<200||n.statusCode>=300)&&r(n.statusCode),e(n.body))})})}function p(t,n){if("node"===wt.type){var e=y(t,n);return"json"===n.type?e.then(function(t){if("string"!=typeof t)throw new Error("Response is unexpectedly not a string");return JSON.parse(t)}):"arraybuffer"===n.type?e.then(function(t){if(!(t instanceof Buffer))throw new Error("Response is unexpectedly not a buffer");for(var n=new ArrayBuffer(t.length),e=new Uint8Array(n),r=0;r<t.length;++r)e[r]=t[r];return n}):e}return l(t,n)}function v(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=n[0],o=n[1];if("string"!=typeof r&&(r=(o=r).url),"string"!=typeof r)throw new Error("The first argument or options.url must be a string");return o=Object.assign({},{type:"text",local:!1,encoding:"utf-8"},o),[r,o]}function g(t,n,e){var r=Math.max(t,n,e),o=Math.min(t,n,e),i=void 0,u=void 0,a=(r+o)/2;if(r===o)i=0,u=0;else{var s=r-o;u=a>.5?s/(2-r-o):s/(r+o),i=r===t?((n-e)/s+(n<e?6:0))/6:r===n?((e-t)/s+2)/6:((t-n)/s+4)/6}return[i,u,a]}function d(t,n,e){var r=void 0,o=void 0,i=void 0;if(0===n)r=e,o=e,i=e;else{var u=e<.5?e*(1+n):e+n-e*n,a=2*e-u,s=function(t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?a+6*(u-a)*t:t<.5?u:t<2/3?a+(u-a)*(2/3-t)*6:a};r=s(t+1/3),o=s(t),i=s(t-1/3)}return[r,o,i]}function m(t,n,e){var r=Math.max(t,n,e),o=Math.min(t,n,e),i=r-o,u=0===r?0:i/r,a=r,s=void 0;return s=r===o?0:r===t?((n-e)/i+(n<e?6:0))/6:r===n?((e-t)/i+2)/6:((t-n)/i+4)/6,[s,u,a]}function w(t,n,e){var r=Math.floor(6*t),o=6*t-r,i=e*(1-n),u=e*(1-o*n),a=e*(1-(1-o)*n);switch(r%6){case 0:return[e,a,i];case 1:return[u,e,i];case 2:return[i,e,a];case 3:return[i,u,e];case 4:return[a,i,e];case 5:return[e,i,u]}return[0,0,0]}function b(t){var n=X(t,9),e=n[0],r=n[1],o=n[2],i=n[3],u=n[4],a=n[5],s=n[6],c=n[7],f=n[8],h=u*f-a*c,l=a*s-i*f,y=i*c-u*s,p=e*h+r*l+o*y;if(0===p)throw new Error;return[h/p,(o*c-r*f)/p,(r*a-o*u)/p,l/p,(e*f-o*s)/p,(o*i-e*a)/p,y/p,(r*s-e*c)/p,(e*u-r*i)/p]}function k(t){var n=Yt(t);if(void 0!==n.RGBToXYZMatrix)return n.RGBToXYZMatrix;var e=new Xt(t.r).toArray(),r=X(e,3),o=r[0],i=r[1],u=r[2],a=new Xt(t.g).toArray(),s=X(a,3),c=s[0],f=s[1],h=s[2],l=new Xt(t.b).toArray(),y=X(l,3),p=y[0],v=y[1],g=y[2],d=new Xt(t.w).toArray(),m=X(d,3),w=m[0],k=m[1],x=m[2],A=b([o,c,p,i,f,v,u,h,g]),B=A.a*w+A.b*k+A.c*x,S=A.d*w+A.e*k+A.f*x,R=A.g*w+A.h*k+A.i*x;return n.RGBToXYZMatrix=[B*o,S*c,R*p,B*i,S*f,R*v,B*u,S*h,R*g],n.RGBToXYZMatrix}function x(t){var n=Yt(t);if(void 0!==n.XYZToRGBMatrix)return n.XYZToRGBMatrix;var e=k(t);return n.XYZToRGBMatrix=b(e),n.XYZToRGBMatrix}function A(t){return t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t}function B(t){return t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92}function S(t){return t>216/24389?Math.pow(t,1/3):841/108*t+4/29}function R(t){return t>6/29?t*t*t:108/841*(t-4/29)}function j(t,n,e){var r=Math.min(t,n,e);t-=r,n-=r,e-=r;var o=Math.max(t,n,e),i=Math.min(t,n);t-=i,n-=i,0!==e&&0!==n&&(e/=2,n/=2),i+=n,e+=n;var u=Math.max(t,i,e);if(0!==u){var a=o/u;t*=a,i*=a,e*=a}return t+=r,i+=r,e+=r,[t,i,e]}function T(t,n,e){var r=Math.min(t,n,e);t-=r,n-=r,e-=r;var o=Math.max(t,n,e),i=Math.min(n,e);n-=i,0!==(e-=i)&&0!==i&&(e*=2,i*=2),t+=n,i+=n;var u=Math.max(t,i,e);if(0!==u){var a=o/u;t*=a,i*=a,e*=a}return t+=r,i+=r,e+=r,[t,i,e]}var E,M,G,O="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},C=n(function(t){!function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(t,n){return t<<n|t>>>32-n},rotr:function(t,n){return t<<32-n|t>>>n},endian:function(t){if(t.constructor==Number)return 16711935&e.rotl(t,8)|4278255360&e.rotl(t,24);for(var n=0;n<t.length;n++)t[n]=e.endian(t[n]);return t},randomBytes:function(t){for(var n=[];t>0;t--)n.push(Math.floor(256*Math.random()));return n},bytesToWords:function(t){for(var n=[],e=0,r=0;e<t.length;e++,r+=8)n[r>>>5]|=t[e]<<24-r%32;return n},wordsToBytes:function(t){for(var n=[],e=0;e<32*t.length;e+=8)n.push(t[e>>>5]>>>24-e%32&255);return n},bytesToHex:function(t){for(var n=[],e=0;e<t.length;e++)n.push((t[e]>>>4).toString(16)),n.push((15&t[e]).toString(16));return n.join("")},hexToBytes:function(t){for(var n=[],e=0;e<t.length;e+=2)n.push(parseInt(t.substr(e,2),16));return n},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var o=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?e.push(n.charAt(o>>>6*(3-i)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,o=0;r<t.length;o=++r%4)0!=o&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|n.indexOf(t.charAt(r))>>>6-2*o);return e}};t.exports=e}()}),q={utf8:{stringToBytes:function(t){return q.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(q.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],e=0;e<t.length;e++)n.push(255&t.charCodeAt(e));return n},bytesToString:function(t){for(var n=[],e=0;e<t.length;e++)n.push(String.fromCharCode(t[e]));return n.join("")}}},P=q,z=function(t){return null!=t&&(e(t)||r(t)||!!t._isBuffer)},F=(n(function(t){!function(){var n=C,e=P.utf8,r=z,o=P.bin,i=function t(i,u){i.constructor==String?i=u&&"binary"===u.encoding?o.stringToBytes(i):e.stringToBytes(i):r(i)?i=Array.prototype.slice.call(i,0):Array.isArray(i)||(i=i.toString());for(var a=n.bytesToWords(i),s=8*i.length,c=1732584193,f=-271733879,h=-1732584194,l=271733878,y=0;y<a.length;y++)a[y]=16711935&(a[y]<<8|a[y]>>>24)|4278255360&(a[y]<<24|a[y]>>>8);a[s>>>5]|=128<<s%32,a[14+(s+64>>>9<<4)]=s;for(var p=t._ff,v=t._gg,g=t._hh,d=t._ii,y=0;y<a.length;y+=16){var m=c,w=f,b=h,k=l;f=d(f=d(f=d(f=d(f=g(f=g(f=g(f=g(f=v(f=v(f=v(f=v(f=p(f=p(f=p(f=p(f,h=p(h,l=p(l,c=p(c,f,h,l,a[y+0],7,-680876936),f,h,a[y+1],12,-389564586),c,f,a[y+2],17,606105819),l,c,a[y+3],22,-1044525330),h=p(h,l=p(l,c=p(c,f,h,l,a[y+4],7,-176418897),f,h,a[y+5],12,1200080426),c,f,a[y+6],17,-1473231341),l,c,a[y+7],22,-45705983),h=p(h,l=p(l,c=p(c,f,h,l,a[y+8],7,1770035416),f,h,a[y+9],12,-1958414417),c,f,a[y+10],17,-42063),l,c,a[y+11],22,-1990404162),h=p(h,l=p(l,c=p(c,f,h,l,a[y+12],7,1804603682),f,h,a[y+13],12,-40341101),c,f,a[y+14],17,-1502002290),l,c,a[y+15],22,1236535329),h=v(h,l=v(l,c=v(c,f,h,l,a[y+1],5,-165796510),f,h,a[y+6],9,-1069501632),c,f,a[y+11],14,643717713),l,c,a[y+0],20,-373897302),h=v(h,l=v(l,c=v(c,f,h,l,a[y+5],5,-701558691),f,h,a[y+10],9,38016083),c,f,a[y+15],14,-660478335),l,c,a[y+4],20,-405537848),h=v(h,l=v(l,c=v(c,f,h,l,a[y+9],5,568446438),f,h,a[y+14],9,-1019803690),c,f,a[y+3],14,-187363961),l,c,a[y+8],20,1163531501),h=v(h,l=v(l,c=v(c,f,h,l,a[y+13],5,-1444681467),f,h,a[y+2],9,-51403784),c,f,a[y+7],14,1735328473),l,c,a[y+12],20,-1926607734),h=g(h,l=g(l,c=g(c,f,h,l,a[y+5],4,-378558),f,h,a[y+8],11,-2022574463),c,f,a[y+11],16,1839030562),l,c,a[y+14],23,-35309556),h=g(h,l=g(l,c=g(c,f,h,l,a[y+1],4,-1530992060),f,h,a[y+4],11,1272893353),c,f,a[y+7],16,-155497632),l,c,a[y+10],23,-1094730640),h=g(h,l=g(l,c=g(c,f,h,l,a[y+13],4,681279174),f,h,a[y+0],11,-358537222),c,f,a[y+3],16,-722521979),l,c,a[y+6],23,76029189),h=g(h,l=g(l,c=g(c,f,h,l,a[y+9],4,-640364487),f,h,a[y+12],11,-421815835),c,f,a[y+15],16,530742520),l,c,a[y+2],23,-995338651),h=d(h,l=d(l,c=d(c,f,h,l,a[y+0],6,-198630844),f,h,a[y+7],10,1126891415),c,f,a[y+14],15,-1416354905),l,c,a[y+5],21,-57434055),h=d(h,l=d(l,c=d(c,f,h,l,a[y+12],6,1700485571),f,h,a[y+3],10,-1894986606),c,f,a[y+10],15,-1051523),l,c,a[y+1],21,-2054922799),h=d(h,l=d(l,c=d(c,f,h,l,a[y+8],6,1873313359),f,h,a[y+15],10,-30611744),c,f,a[y+6],15,-1560198380),l,c,a[y+13],21,1309151649),h=d(h,l=d(l,c=d(c,f,h,l,a[y+4],6,-145523070),f,h,a[y+11],10,-1120210379),c,f,a[y+2],15,718787259),l,c,a[y+9],21,-343485551),c=c+m>>>0,f=f+w>>>0,h=h+b>>>0,l=l+k>>>0}return n.endian([c,f,h,l])};i._ff=function(t,n,e,r,o,i,u){var a=t+(n&e|~n&r)+(o>>>0)+u;return(a<<i|a>>>32-i)+n},i._gg=function(t,n,e,r,o,i,u){var a=t+(n&r|e&~r)+(o>>>0)+u;return(a<<i|a>>>32-i)+n},i._hh=function(t,n,e,r,o,i,u){var a=t+(n^e^r)+(o>>>0)+u;return(a<<i|a>>>32-i)+n},i._ii=function(t,n,e,r,o,i,u){var a=t+(e^(n|~r))+(o>>>0)+u;return(a<<i|a>>>32-i)+n},i._blocksize=16,i._digestsize=16,t.exports=function(t,e){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(i(t,e));return e&&e.asBytes?r:e&&e.asString?o.bytesToString(r):n.bytesToHex(r)}}()}),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),_=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},D=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),Z=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},L=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},X=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Y=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)},I={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},U=function(t){throw{name:"SyntaxError",message:t,at:E,text:void 0}},N=function(t){return t&&t!==M&&U("Expected '"+t+"' instead of '"+M+"'"),M=(void 0).charAt(E),E+=1,M},H=function(){var t,n="";for("-"===M&&(n="-",N("-"));M>="0"&&M<="9";)n+=M,N();if("."===M)for(n+=".";N()&&M>="0"&&M<="9";)n+=M;if("e"===M||"E"===M)for(n+=M,N(),"-"!==M&&"+"!==M||(n+=M,N());M>="0"&&M<="9";)n+=M,N();if(t=+n,isFinite(t))return t;U("Bad number")},J=function(){var t,n,e,r="";if('"'===M)for(;N();){if('"'===M)return N(),r;if("\\"===M)if(N(),"u"===M){for(e=0,n=0;n<4&&(t=parseInt(N(),16),isFinite(t));n+=1)e=16*e+t;r+=String.fromCharCode(e)}else{if("string"!=typeof I[M])break;r+=I[M]}else r+=M}U("Bad string")},V=function(){for(;M&&M<=" ";)N()},K=function(){switch(M){case"t":return N("t"),N("r"),N("u"),N("e"),!0;case"f":return N("f"),N("a"),N("l"),N("s"),N("e"),!1;case"n":return N("n"),N("u"),N("l"),N("l"),null}U("Unexpected '"+M+"'")},W=function(){var t=[];if("["===M){if(N("["),V(),"]"===M)return N("]"),t;for(;M;){if(t.push(G()),V(),"]"===M)return N("]"),t;N(","),V()}}U("Bad array")},Q=function(){var t,n={};if("{"===M){if(N("{"),V(),"}"===M)return N("}"),n;for(;M;){if(t=J(),V(),N(":"),Object.hasOwnProperty.call(n,t)&&U('Duplicate key "'+t+'"'),n[t]=G(),V(),"}"===M)return N("}"),n;N(","),V()}}U("Bad object")};G=function(){switch(V(),M){case"{":return Q();case"[":return W();case'"':return J();case"-":return H();default:return M>="0"&&M<="9"?H():K()}};var $=function(t,n){if(n=n.split(":")[0],!(t=+t))return!1;switch(n){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},tt=Object.prototype.hasOwnProperty,nt={stringify:function(t,n){var e=[];"string"!=typeof(n=n||"")&&(n="?");for(var r in t)tt.call(t,r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.length?n+e.join("&"):""},parse:function(t){for(var n,e=/([^=?&]+)=?([^&]*)/g,r={};n=e.exec(t);r[o(n[1])]=o(n[2]));return r}},et=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,rt=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,ot=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],it={hash:1,query:1};s.prototype={set:function(t,n,e){var r=this;switch(t){case"query":"string"==typeof n&&n.length&&(n=(e||nt.parse)(n)),r[t]=n;break;case"port":r[t]=n,$(n,r.protocol)?n&&(r.host=r.hostname+":"+n):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=n,r.port&&(n+=":"+r.port),r.host=n;break;case"host":r[t]=n,/:\d+$/.test(n)?(n=n.split(":"),r.port=n.pop(),r.hostname=n.join(":")):(r.hostname=n,r.port="");break;case"protocol":r.protocol=n.toLowerCase(),r.slashes=!e;break;case"pathname":r.pathname=n.length&&"/"!==n.charAt(0)?"/"+n:n;break;default:r[t]=n}for(var o=0;o<ot.length;o++){var i=ot[o];i[4]&&(r[i[1]]=r[i[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(t){t&&"function"==typeof t||(t=nt.stringify);var n,e=this,r=e.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(e.slashes?"//":"");return e.username&&(o+=e.username,e.password&&(o+=":"+e.password),o+="@"),o+=e.host+e.pathname,(n="object"===F(e.query)?t(e.query):e.query)&&(o+="?"!==n.charAt(0)?"?"+n:n),e.hash&&(o+=e.hash),o}},s.extractProtocol=u,s.location=i,s.qs=nt;var ut,at=s,st=n(function(t,n){!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),r=0;r<t.length;r++)e[t.charCodeAt(r)]=r;n.encode=function(n){var e,r=new Uint8Array(n),o=r.length,i="";for(e=0;e<o;e+=3)i+=t[r[e]>>2],i+=t[(3&r[e])<<4|r[e+1]>>4],i+=t[(15&r[e+1])<<2|r[e+2]>>6],i+=t[63&r[e+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},n.decode=function(t){var n,r,o,i,u,a=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var f=new ArrayBuffer(a),h=new Uint8Array(f);for(n=0;n<s;n+=4)r=e[t.charCodeAt(n)],o=e[t.charCodeAt(n+1)],i=e[t.charCodeAt(n+2)],u=e[t.charCodeAt(n+3)],h[c++]=r<<2|o>>4,h[c++]=(15&o)<<4|i>>2,h[c++]=(3&i)<<6|63&u;return f}}()}),ct=O.crypto||O.msCrypto;if(ct&&ct.getRandomValues){var ft=new Uint8Array(16);ut=function(){return ct.getRandomValues(ft),ft}}if(!ut){var ht=new Array(16);ut=function(){for(var t,n=0;n<16;n++)0==(3&n)&&(t=4294967296*Math.random()),ht[n]=t>>>((3&n)<<3)&255;return ht}}for(var lt=ut,yt=[],pt=0;pt<256;++pt)yt[pt]=(pt+256).toString(16).substr(1);var vt=lt(),gt=(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5],vt[6],vt[7],c("AggregateFunction")),dt=function(){function t(n){if(_(this,t),n!==gt)throw new Error;for(var e=gt(this),r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];e.targets=o}return D(t,[{key:"apply",value:function(t,n,e){return gt(this).targets.map(function(t){return Reflect.apply(t,n,e)})}},{key:"getPrototypeOf",value:function(t){return this.constructor.prototype}}],[{key:"new",value:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=new(Function.prototype.bind.apply(this,[null].concat([gt],n)));return new Proxy(function(){},r)}}]),t}(),mt=c("Aggregate");!function(){function t(n){if(_(this,t),n!==mt)throw new Error;for(var e=mt(this),r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];e.targets=o}D(t,[{key:"set",value:function(t,n,e,r){return mt(this).targets.forEach(function(t){Reflect.set(t,n,e)}),Reflect.set(t,n,e,r)}},{key:"get",value:function(t,n,e){var r=mt(this);return r.targets.every(function(t){return"function"==typeof Reflect.get(t,n)})?dt.new.apply(dt,Y(r.targets.map(function(t){return Reflect.get(t,n).bind(t)}))):Reflect.get(r.targets[0],n,e)}},{key:"getPrototypeOf",value:function(t){return this.constructor.prototype}}],[{key:"new",value:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=new(Function.prototype.bind.apply(this,[null].concat([mt],n)));return new Proxy({},r)}}])}();Object.setPrototypeOf(f,Error),(f.prototype=Object.create(Error.prototype)).name="AssertionError",f.prototype.message="",f.prototype.constructor=f;var wt=function(){function t(){_(this,t)}return D(t,null,[{key:"type",get:function(){try{if(new Function("return this === window")())return"browser"}catch(t){}try{if(new Function("return this === self")())return"worker"}catch(t){}try{if(new Function("return this === global")())return"node"}catch(t){}throw new Error}},{key:"self",get:function(){switch(this.type){case"browser":return window;case"worker":return self;case"node":return global}throw new Error}}]),t}(),bt=c("FilePath"),kt=function(){function t(){_(this,t)}return D(t,null,[{key:"self",get:function(){return bt(this).self}},{key:"current",get:function(){switch(wt.type){case"browser":return window.location.href;case"worker":return self.location.href;case"node":return process.cwd()}throw new Error}}]),t}();bt(kt).self=kt.current,Object.setPrototypeOf(h,Error),(h.prototype=Object.create(Error.prototype)).name="ImplementationError",h.prototype.message="",h.prototype.constructor=h;var xt=c("Multiton"),At=(function(){function t(n){if(_(this,t),this.constructor.has(n))throw new Error('Attempt to create multiple instances for key "'+n+'"')}D(t,null,[{key:"has",value:function(t){var n=xt(this);if(void 0===n.instances)return!1;var e=this.coerceKey(t);return void 0!==n.instances[e]}},{key:"for",value:function(t){var n=xt(this);n.instances||(n.instances=new Map);var e=this.coerceKey(t);if(n.instances.has(e))return n.instances.get(e);for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var u=this.new.apply(this,[e].concat(o));return n.instances.set(e,u),u}},{key:"new",value:function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return new(Function.prototype.bind.apply(this,[null].concat([t],e)))}},{key:"coerceKey",value:function(t){return t}}])}(),function(t){function n(){return _(this,n),L(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Z(n,at),n}()),Bt=void 0,St=void 0;if("node"===wt.type){var Rt=require("fs");Bt=Rt.readFile,St=require("request")}!function(){function t(){_(this,t)}D(t,null,[{key:"text",value:function(){var t=v.apply(void 0,arguments),n=X(t,2),e=n[0],r=n[1];return r.type="text",p(e,r)}},{key:"json",value:function(){var t=v.apply(void 0,arguments),n=X(t,2),e=n[0],r=n[1];return r.type="json",p(e,r)}},{key:"buffer",value:function(){var t=v.apply(void 0,arguments),n=X(t,2),e=n[0],r=n[1];return r.type="arraybuffer",r.encoding=null,p(e,r)}},{key:"csv",value:function(){var t=v.apply(void 0,arguments),n=X(t,2),e=n[0],r=n[1];return this.text(e,r).then(function(t){return wt.self.d3.csvParse(t,r.row)})}},{key:"tsv",value:function(){var t=v.apply(void 0,arguments),n=X(t,2),e=n[0],r=n[1];return this.text(e,r).then(function(t){return wt.self.d3.tsvParse(t,r.row)})}}])}();var jt=c("Semaphore"),Tt=function t(n,e){var r=this;_(this,t);var o=[new Promise(function(t,n){r.resolve=t,r.reject=n}),new Promise(function(t){r.let=t}).then(function(){e(r.resolve,r.reject)})];this.promise=Promise.all(o).then(function(t){return n.signal(),t[0]},function(t){return n.signal(),Promise.reject(t)})},Et=(function(){function t(n){_(this,t);var e=jt(this);e.capacity=n,e.available=n,e.queue=[]}D(t,[{key:"wait",value:function(t){var n=jt(this),e=new Tt(this,t);return 0===n.available?n.queue.push(e):(--n.available,e.let()),e.promise}},{key:"signal",value:function(){var t=jt(this);0===t.queue.length?++t.available:t.queue.shift().let()}},{key:"capacity",get:function(){return jt(this).capacity}},{key:"available",get:function(){return jt(this).available}}])}(),c("Singleton"));(function(){function t(){if(_(this,t),void 0!==Et(this.constructor).instance)throw new Error("Attempt to create multiple instances for singleton")}D(t,null,[{key:"get",value:function(){var t=Et(this);return void 0===t.instance&&(t.instance=this.new.apply(this,arguments)),t.instance}},{key:"new",value:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return new(Function.prototype.bind.apply(this,[null].concat(n)))}}])})(),function(){function t(){_(this,t)}D(t,null,[{key:"transform",value:function(t,n,e){var r=[];return t.forEach(function(o,i){var u=i%n;if(r[u]=o,u===n-1)for(var a=e.apply(void 0,r.concat([Math.floor(i/n)])),s=0;s<n;++s)t[i-(n-s-1)]=a[s]}),t}},{key:"forEach",value:function(t,n,e){var r=[];t.forEach(function(t,o){var i=o%n;r[i]=t,i===n-1&&e.apply(void 0,r.concat([Math.floor(o/n)]))})}},{key:"some",value:function(t,n,e){var r=[];return t.some(function(t,o){var i=o%n;return r[i]=t,i===n-1&&e.apply(void 0,r.concat([Math.floor(o/n)]))})}},{key:"every",value:function(t,n,e){var r=[];return t.every(function(t,o){var i=o%n;return r[i]=t,i!==n-1||e.apply(void 0,r.concat([Math.floor(o/n)]))})}},{key:"reduce",value:function(t,n,e,r){var o=[];return t.reduce(function(t,r,i){var u=i%n;return o[u]=r,u===n-1?e.apply(void 0,[t].concat(o,[Math.floor(i/n)])):t},r)}}])}();if("node"===wt.type){var Mt=require("text-encoding");void 0===wt.self.TextEncoder&&(wt.self.TextEncoder=Mt.TextEncoder),void 0===wt.self.TextDecoder&&(wt.self.TextDecoder=Mt.TextDecoder)}!function(){function t(){_(this,t)}D(t,null,[{key:"encode",value:function(t){if("function"!=typeof TextEncoder)throw new Error("TextEncoder is missing");var n=new TextEncoder,e=JSON.stringify(t);return n.encode(e).buffer}},{key:"decode",value:function(t){if("function"!=typeof TextDecoder)throw new Error("TextDecoder is missing");var n=new TextDecoder,e=new DataView(t),r=n.decode(e);return JSON.parse(r)}},{key:"pack",value:function(t){return st.encode(t)}},{key:"unpack",value:function(t){return st.decode(t)}},{key:"packBufferGeometry",value:function(t){var n=this;Object.values(t.data.attributes).forEach(function(t){var e=new(0,wt.self[t.type])(t.array).buffer;t.array=n.pack(e)})}},{key:"unpackBufferGeometry",value:function(t){var n=this;Object.values(t.data.attributes).forEach(function(t){var e=wt.self[t.type],r=n.unpack(t.array);t.array=Array.from(new e(r))})}}])}();var Gt=c("Chromaticity"),Ot=function(){function t(n,e){_(this,t);var r=Gt(this);r.x=n,r.y=e}return D(t,[{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["x","y","z"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"x",get:function(){return Gt(this).x}},{key:"y",get:function(){return Gt(this).y}},{key:"z",get:function(){var t=Gt(this);return 1-t.x-t.y}}]),t}(),Ct=c("Illuminant"),qt=function(){function t(n){_(this,t),Ct(this).chromaticity=n}return D(t,[{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["chromaticity"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"x",get:function(){return Ct(this).chromaticity.x}},{key:"y",get:function(){return Ct(this).chromaticity.y}},{key:"z",get:function(){return Ct(this).chromaticity.z}},{key:"chromaticity",get:function(){Ct(this);return chromaticity}}]),t}();qt.D50=new qt(new Ot(.3457,.3585)),qt.D65=new qt(new Ot(.3127,.329));var Pt=c("Primaries"),zt=function(){function t(n,e,r,o){_(this,t);var i=Pt(this);i.r=n,i.g=e,i.b=r,i.w=o}return D(t,[{key:"toArray",value:function(){return[this.r,this.g,this.b,this.w]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["r","g","b","w"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"r",get:function(){return Pt(this).r}},{key:"g",get:function(){return Pt(this).g}},{key:"b",get:function(){return Pt(this).b}},{key:"w",get:function(){return Pt(this).w}}]),t}();zt.sRGB=new zt(new Ot(.64,.33),new Ot(.3,.6),new Ot(.15,.06),qt.D65),zt.AdobeRGB=new zt(new Ot(.64,.33),new Ot(.21,.71),new Ot(.15,.06),qt.D65);var Ft=c("RGB"),_t=function(){function t(){_(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var o=[].concat(e),i=Ft(this);if(e[e.length-1]instanceof zt?i.primaries=o.pop():i.primaries=zt.sRGB,0===o.length)this.r=0,this.g=0,this.b=0;else if(1===o.length){var u=X(o,1)[0];this.r=u||0,this.g=u||0,this.b=u||0}else{var a=X(o,3),s=a[0],c=a[1],f=a[2];this.r=s||0,this.g=c||0,this.b=f||0}}return D(t,[{key:"toArray",value:function(){return[this.r,this.g,this.b]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["r","g","b"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"red",get:function(){return this.r},set:function(t){this.r=t}},{key:"green",get:function(){return this.g},set:function(t){this.g=t}},{key:"blue",get:function(){return this.b},set:function(t){this.b=t}},{key:"primaries",get:function(){return Ft(this).primaries}}]),t}(),Dt=function(){function t(){_(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];if(0===e.length)this.h=0,this.s=0,this.l=0;else{var o=e[0],i=e[1],u=e[2];this.h=o||0,this.s=i||0,this.l=u||0}}return D(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt.sRGB;return new(Function.prototype.bind.apply(_t,[null].concat(Y(d.apply(void 0,Y(this.toArray()))),[t])))}},{key:"toArray",value:function(){return[this.h,this.s,this.l]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["h","s","l"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"hue",get:function(){return this.h},set:function(t){this.h=t}},{key:"saturation",get:function(){return this.s},set:function(t){this.s=t}},{key:"lightness",get:function(){return this.l},set:function(t){this.l=t}}],[{key:"fromRGB",value:function(t){return new(Function.prototype.bind.apply(this,[null].concat(Y(g.apply(void 0,Y(t.toArray()))))))}}]),t}(),Zt=function(){function t(){_(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];if(0===e.length)this.h=0,this.s=0,this.v=0;else{var o=e[0],i=e[1],u=e[2];this.h=o||0,this.s=i||0,this.v=u||0}}return D(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt.sRGB;return new(Function.prototype.bind.apply(_t,[null].concat(Y(w.apply(void 0,Y(this.toArray()))),[t])))}},{key:"toArray",value:function(){return[this.h,this.s,this.v]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["h","s","v"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"hue",get:function(){return this.h},set:function(t){this.h=t}},{key:"saturation",get:function(){return this.s},set:function(t){this.s=t}},{key:"value",get:function(){return this.v},set:function(t){this.v=t}}],[{key:"fromRGB",value:function(t){return new(Function.prototype.bind.apply(this,[null].concat(Y(m.apply(void 0,Y(t.toArray()))))))}}]),t}(),Lt=c("Tristimulus"),Xt=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_(this,t);var r=Lt(this),o=n.x,i=n.y;r.y=e,r.x=e/i*o,r.z=e/i*(1-o-i)}return D(t,[{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["x","y","z"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"x",get:function(){return Lt(this).x}},{key:"y",get:function(){return Lt(this).y}},{key:"z",get:function(){return Lt(this).z}}]),t}(),Yt=c("XYZ"),It=function(){function t(){_(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];if(0===e.length)this.x=0,this.y=0,this.z=0;else{var o=e[0],i=e[1],u=e[2];this.x=o||0,this.y=i||0,this.z=u||0}}return D(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt.sRGB,n=this.x,e=this.y,r=this.z,o=x(t),i=o[0]*n+o[1]*e+o[2]*r,u=o[3]*n+o[4]*e+o[5]*r,a=o[6]*n+o[7]*e+o[8]*r;return new _t(A(i),A(u),A(a),t)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["x","y","z"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}}],[{key:"fromRGB",value:function(t){var n=k(t.primaries),e=B(t.r),r=B(t.g),o=B(t.b);return new this(n[0]*e+n[1]*r+n[2]*o,n[3]*e+n[4]*r+n[5]*o,n[6]*e+n[7]*r+n[8]*o)}}]),t}(),Ut=c("Lab"),Nt=function(){function t(){_(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var o=[].concat(e),i=Ut(this);if(e[e.length-1]instanceof qt?i.illuminant=o.pop():i.illuminant=qt.D50,0===o.length)this.l=0,this.a=0,this.b=0;else{var u=X(o,3),a=u[0],s=u[1],c=u[2];this.l=a||0,this.a=s||0,this.b=c||0}}return D(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt.sRGB;return this.toXYZ().toRGB(t)}},{key:"toXYZ",value:function(){var t=new Tristimulus(this.illuminant),n=(this.l+16)/116;return new It(R(n+this.a/500)*t.x,R(n)*t.y,R(n-this.b/200)*t.z)}},{key:"toArray",value:function(){return[this.l,this.a,this.b]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["l","a","b"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"lightness",get:function(){return this.l},set:function(t){this.l=t}},{key:"illuminant",get:function(){return Ut(this).illuminant}}],[{key:"fromRGB",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt.D50;return this.fromXYZ(It.fromRGB(t),n)}},{key:"fromXYZ",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt.D50,e=new Tristimulus(n),r=S(t.y/e.y);return new this(116*r-16,500*(S(t.x/e.x)-r),200*(r-S(t.z/e.z)),n)}}]),t}(),Ht=c("LCh"),Jt=function(){function t(){_(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var o=[].concat(e),i=Ht(this);if(e[e.length-1]instanceof qt?i.illuminant=o.pop():i.illuminant=qt.D50,0===o.length)this.l=0,this.c=0,this.h=0;else{var u=X(o,3),a=u[0],s=u[1],c=u[2];this.l=a||0,this.c=s||0,this.h=c||0}}return D(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt.sRGB;return this.toLab().toRGB(t)}},{key:"toLab",value:function(){var t=this.l,n=this.c,e=this.h,r=this.illuminant;return new Nt(t,n*Math.cos(e),n*Math.sin(e),r)}},{key:"toArray",value:function(){return[this.l,this.c,this.h]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["l","c","h"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"lightness",get:function(){return this.l},set:function(t){this.l=t}},{key:"chroma",get:function(){return this.c},set:function(t){this.c=t}},{key:"hue",get:function(){return this.h},set:function(t){this.h=t}},{key:"illuminant",get:function(){return Ht(this).illuminant}}],[{key:"fromRGB",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt.D50;return this.fromLab(Nt.fromRGB(t,n))}},{key:"fromLab",value:function(t){var n=t.l,e=t.a,r=t.b,o=t.illuminant;return new this(n,Math.sqrt(e*e+r*r),Math.atan2(r,e),o)}}]),t}(),Vt=function(){function t(){_(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];if(0===e.length)this.r=0,this.y=0,this.b=0;else if(1===e.length){var o=e[0];this.r=o||0,this.y=o||0,this.b=o||0}else{var i=e[0],u=e[1],a=e[2];this.r=i||0,this.y=u||0,this.b=a||0}}return D(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt.sRGB;return new(Function.prototype.bind.apply(_t,[null].concat(Y(T.apply(void 0,Y(this.toArray()))),[t])))}},{key:"toArray",value:function(){return[this.r,this.y,this.b]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["r","y","b"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"red",get:function(){return this.r},set:function(t){this.r=t}},{key:"yellow",get:function(){return this.y},set:function(t){this.y=t}},{key:"blue",get:function(){return this.b},set:function(t){this.b=t}}],[{key:"fromRGB",value:function(t){return new(Function.prototype.bind.apply(this,[null].concat(Y(j.apply(void 0,Y(t.toArray()))))))}}]),t}();t.Chromaticity=Ot,t.HSL=Dt,t.HSV=Zt,t.Illuminant=qt,t.Lab=Nt,t.LCh=Jt,t.Primaries=zt,t.RGB=_t,t.RYB=Vt,t.Tristimulus=Xt,t.XYZ=It,Object.defineProperty(t,"__esModule",{value:!0})});