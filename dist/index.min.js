!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.Color={})}(this,function(t){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=Symbol(t);return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return void 0===t[n]&&(t[n]=e({})),t[n]}}function e(t){this.message=t}function r(t,n){return n={exports:{}},t(n,n.exports),n.exports}function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function o(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}function u(t){this.message=t}function s(t){return decodeURIComponent(t.replace(/\+/g," "))}function a(t){var n,e={},r=void 0===(t=t||D.location||{})?"undefined":M(t);if("blob:"===t.protocol)e=new f(unescape(t.pathname),{});else if("string"===r){e=new f(t,{});for(n in ct)delete e[n]}else if("object"===r){for(n in t)n in ct||(e[n]=t[n]);void 0===e.slashes&&(e.slashes=st.test(t.href))}return e}function c(t){var n=ut.exec(t);return{protocol:n[1]?n[1].toLowerCase():"",slashes:!!n[2],rest:n[3]}}function h(t,n){for(var e=(n||"/").split("/").slice(0,-1).concat(t.split("/")),r=e.length,i=e[r-1],o=!1,u=0;r--;)"."===e[r]?e.splice(r,1):".."===e[r]?(e.splice(r,1),u++):u&&(0===r&&(o=!0),e.splice(r,1),u--);return o&&e.unshift(""),"."!==i&&".."!==i||e.push(""),e.join("/")}function f(t,n,e){if(!(this instanceof f))return new f(t,n,e);var r,i,o,u,s,l,y=at.slice(),v=void 0===n?"undefined":M(n),p=this,g=0;for("object"!==v&&"string"!==v&&(e=n,n=null),e&&"function"!=typeof e&&(e=ot.parse),n=a(n),r=!(i=c(t||"")).protocol&&!i.slashes,p.slashes=i.slashes||r&&n.slashes,p.protocol=i.protocol||n.protocol||"",t=i.rest,i.slashes||(y[2]=[/(.*)/,"pathname"]);g<y.length;g++)o=(u=y[g])[0],l=u[1],o!==o?p[l]=t:"string"==typeof o?~(s=t.indexOf(o))&&("number"==typeof u[2]?(p[l]=t.slice(0,s),t=t.slice(s+u[2])):(p[l]=t.slice(s),t=t.slice(0,s))):(s=o.exec(t))&&(p[l]=s[1],t=t.slice(0,s.index)),p[l]=p[l]||(r&&u[3]?n[l]||"":""),u[4]&&(p[l]=p[l].toLowerCase());e&&(p.query=e(p.query)),r&&n.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==n.pathname)&&(p.pathname=h(p.pathname,n.pathname)),rt(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(u=p.auth.split(":"),p.username=u[0]||"",p.password=u[1]||""),p.origin=p.protocol&&p.host&&"file:"!==p.protocol?p.protocol+"//"+p.host:"null",p.href=p.toString()}function l(t,n){return new Promise(function(e,r){var i=new ft(t,!0);n.query&&i.set("query",Object.assign({},i.query,n.query));var o=new XMLHttpRequest;o.open("get",i.toString(),!0),n.headers&&Object.entries(n.headers).forEach(function(t){o.setRequestHeader.apply(o,q(t))}),o.responseType=n.type,o.addEventListener("loadend",function(t){o.status<200||o.status>=300?r(o.status):null!==o.response||"json"!==n.type?e(o.response):r(new Error("Could not parse JSON"))},!1),o.send()})}function y(t,n){return n.local?new Promise(function(e,r){lt(t,n.encoding,function(t,n){t?r(t):e(n)})}):new Promise(function(e,r){yt({url:t,headers:n.headers||{},qs:n.query||{},encoding:n.encoding},function(t,n){t?r(t):((n.statusCode<200||n.statusCode>=300)&&r(n.statusCode),e(n.body))})})}function v(t,n){if("node"===z.type){var e=y(t,n);return"json"===n.type?e.then(function(t){if("string"!=typeof t)throw new Error("Response is unexpectedly not a string");return JSON.parse(t)}):"arraybuffer"===n.type?e.then(function(t){if(!(t instanceof Buffer))throw new Error("Response is unexpectedly not a buffer");for(var n=new ArrayBuffer(t.length),e=new Uint8Array(n),r=0;r<t.length;++r)e[r]=t[r];return n}):e}return l(t,n)}function p(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=n[0],i=n[1];if("string"!=typeof r&&(r=(i=r).url),"string"!=typeof r)throw new Error("The first argument or options.url must be a string");return i=Object.assign({},{type:"text",local:!1,encoding:"utf-8"},i),[r,i]}function g(t){var n=E(t,3),e=n[0],r=n[1],i=n[2],o=Math.max(e,r,i),u=Math.min(e,r,i),s=void 0,a=void 0,c=(o+u)/2;if(o===u)s=0,a=0;else{var h=o-u;a=c>.5?h/(2-o-u):h/(o+u),s=o===e?((r-i)/h+(r<i?6:0))/6:o===r?((i-e)/h+2)/6:((e-r)/h+4)/6}return[s,a,c]}function d(t){var n=E(t,3),e=n[0],r=n[1],i=n[2],o=void 0,u=void 0,s=void 0;if(0===r)o=i,u=i,s=i;else{var a=i<.5?i*(1+r):i+r-i*r,c=2*i-a,h=function(t){var n=t;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?c+6*(a-c)*n:n<.5?a:n<2/3?c+(a-c)*(2/3-n)*6:c};o=h(e+1/3),u=h(e),s=h(e-1/3)}return[o,u,s]}function m(t){var n=E(t,3),e=n[0],r=n[1],i=n[2],o=Math.max(e,r,i),u=Math.min(e,r,i),s=o-u,a=0===o?0:s/o,c=o,h=void 0;return h=o===u?0:o===e?((r-i)/s+(r<i?6:0))/6:o===r?((i-e)/s+2)/6:((e-r)/s+4)/6,[h,a,c]}function w(t){var n=E(t,3),e=n[0],r=n[1],i=n[2],o=Math.floor(6*e),u=6*e-o,s=i*(1-r),a=i*(1-u*r),c=i*(1-(1-u)*r);switch(o%6){case 0:return[i,c,s];case 1:return[a,i,s];case 2:return[s,i,c];case 3:return[s,a,i];case 4:return[c,s,i];case 5:return[i,s,a]}return[0,0,0]}function k(t){return t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t}function b(t){return t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92}function x(t){return t>216/24389?Math.pow(t,1/3):841/108*t+4/29}function A(t){return t>6/29?Math.pow(t,3):108/841*(t-4/29)}function B(t){var n=E(t,3),e=n[0],r=n[1],i=n[2],o=Math.min(e,r,i);e-=o,r-=o,i-=o;var u=Math.max(e,r,i),s=Math.min(e,r);e-=s,r-=s,0!==i&&0!==r&&(i/=2,r/=2),s+=r,i+=r;var a=Math.max(e,s,i);if(0!==a){var c=u/a;e*=c,s*=c,i*=c}return e+=o,s+=o,i+=o,[e,s,i]}function R(t){var n=E(t,3),e=n[0],r=n[1],i=n[2],o=Math.min(e,r,i);e-=o,r-=o,i-=o;var u=Math.max(e,r,i),s=Math.min(r,i);r-=s,0!==(i-=s)&&0!==s&&(i*=2,s*=2),e+=r,s+=r;var a=Math.max(e,s,i);if(0!==a){var c=u/a;e*=c,s*=c,i*=c}return e+=o,s+=o,i+=o,[e,s,i]}var M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},j=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),G=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},T=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},E=function(){function t(t,n){var e=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),q=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)},C=n("AggregateFunction"),O=function(){function t(n){if(S(this,t),n!==C)throw new Error;for(var e=C(this),r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e.targets=i}return j(t,[{key:"apply",value:function(t,n,e){return C(this).targets.map(function(t){return Reflect.apply(t,n,e)})}},{key:"getPrototypeOf",value:function(t){return this.constructor.prototype}}],[{key:"new",value:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=new(Function.prototype.bind.apply(this,[null].concat([C],n)));return new Proxy(function(){},r)}}]),t}(),F=n("Aggregate");!function(){function t(n){if(S(this,t),n!==F)throw new Error;for(var e=F(this),r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e.targets=i}j(t,[{key:"set",value:function(t,n,e,r){return F(this).targets.forEach(function(t){Reflect.set(t,n,e)}),Reflect.set(t,n,e,r)}},{key:"get",value:function(t,n,e){var r=F(this);return r.targets.every(function(t){return"function"==typeof Reflect.get(t,n)})?O.new.apply(O,q(r.targets.map(function(t){return Reflect.get(t,n).bind(t)}))):Reflect.get(r.targets[0],n,e)}},{key:"getPrototypeOf",value:function(t){return this.constructor.prototype}}],[{key:"new",value:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=new(Function.prototype.bind.apply(this,[null].concat([F],n)));return new Proxy({},r)}}])}();Object.setPrototypeOf(e,Error),(e.prototype=Object.create(Error.prototype)).name="AssertionError",e.prototype.message="",e.prototype.constructor=e;var z=function(){function t(){S(this,t)}return j(t,null,[{key:"type",get:function(){try{if(new Function("return this === window")())return"browser"}catch(t){}try{if(new Function("return this === self")())return"worker"}catch(t){}try{if(new Function("return this === global")())return"node"}catch(t){}throw new Error}},{key:"self",get:function(){switch(this.type){case"browser":return window;case"worker":return self;case"node":return global}throw new Error}}]),t}(),P=n("FilePath"),Z=function(){function t(){S(this,t)}return j(t,null,[{key:"self",get:function(){return P(this).self}},{key:"current",get:function(){switch(z.type){case"browser":return window.location.href;case"worker":return self.location.href;case"node":return process.cwd()}throw new Error}}]),t}();P(Z).self=Z.current;var X,Y,L,D="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_=r(function(t){!function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(t,n){return t<<n|t>>>32-n},rotr:function(t,n){return t<<32-n|t>>>n},endian:function(t){if(t.constructor==Number)return 16711935&e.rotl(t,8)|4278255360&e.rotl(t,24);for(var n=0;n<t.length;n++)t[n]=e.endian(t[n]);return t},randomBytes:function(t){for(var n=[];t>0;t--)n.push(Math.floor(256*Math.random()));return n},bytesToWords:function(t){for(var n=[],e=0,r=0;e<t.length;e++,r+=8)n[r>>>5]|=t[e]<<24-r%32;return n},wordsToBytes:function(t){for(var n=[],e=0;e<32*t.length;e+=8)n.push(t[e>>>5]>>>24-e%32&255);return n},bytesToHex:function(t){for(var n=[],e=0;e<t.length;e++)n.push((t[e]>>>4).toString(16)),n.push((15&t[e]).toString(16));return n.join("")},hexToBytes:function(t){for(var n=[],e=0;e<t.length;e+=2)n.push(parseInt(t.substr(e,2),16));return n},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?e.push(n.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}};t.exports=e}()}),I={utf8:{stringToBytes:function(t){return I.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(I.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],e=0;e<t.length;e++)n.push(255&t.charCodeAt(e));return n},bytesToString:function(t){for(var n=[],e=0;e<t.length;e++)n.push(String.fromCharCode(t[e]));return n.join("")}}},U=I,N=function(t){return null!=t&&(i(t)||o(t)||!!t._isBuffer)},H=(r(function(t){!function(){var n=_,e=U.utf8,r=N,i=U.bin,o=function t(o,u){o.constructor==String?o=u&&"binary"===u.encoding?i.stringToBytes(o):e.stringToBytes(o):r(o)?o=Array.prototype.slice.call(o,0):Array.isArray(o)||(o=o.toString());for(var s=n.bytesToWords(o),a=8*o.length,c=1732584193,h=-271733879,f=-1732584194,l=271733878,y=0;y<s.length;y++)s[y]=16711935&(s[y]<<8|s[y]>>>24)|4278255360&(s[y]<<24|s[y]>>>8);s[a>>>5]|=128<<a%32,s[14+(a+64>>>9<<4)]=a;for(var v=t._ff,p=t._gg,g=t._hh,d=t._ii,y=0;y<s.length;y+=16){var m=c,w=h,k=f,b=l;h=d(h=d(h=d(h=d(h=g(h=g(h=g(h=g(h=p(h=p(h=p(h=p(h=v(h=v(h=v(h=v(h,f=v(f,l=v(l,c=v(c,h,f,l,s[y+0],7,-680876936),h,f,s[y+1],12,-389564586),c,h,s[y+2],17,606105819),l,c,s[y+3],22,-1044525330),f=v(f,l=v(l,c=v(c,h,f,l,s[y+4],7,-176418897),h,f,s[y+5],12,1200080426),c,h,s[y+6],17,-1473231341),l,c,s[y+7],22,-45705983),f=v(f,l=v(l,c=v(c,h,f,l,s[y+8],7,1770035416),h,f,s[y+9],12,-1958414417),c,h,s[y+10],17,-42063),l,c,s[y+11],22,-1990404162),f=v(f,l=v(l,c=v(c,h,f,l,s[y+12],7,1804603682),h,f,s[y+13],12,-40341101),c,h,s[y+14],17,-1502002290),l,c,s[y+15],22,1236535329),f=p(f,l=p(l,c=p(c,h,f,l,s[y+1],5,-165796510),h,f,s[y+6],9,-1069501632),c,h,s[y+11],14,643717713),l,c,s[y+0],20,-373897302),f=p(f,l=p(l,c=p(c,h,f,l,s[y+5],5,-701558691),h,f,s[y+10],9,38016083),c,h,s[y+15],14,-660478335),l,c,s[y+4],20,-405537848),f=p(f,l=p(l,c=p(c,h,f,l,s[y+9],5,568446438),h,f,s[y+14],9,-1019803690),c,h,s[y+3],14,-187363961),l,c,s[y+8],20,1163531501),f=p(f,l=p(l,c=p(c,h,f,l,s[y+13],5,-1444681467),h,f,s[y+2],9,-51403784),c,h,s[y+7],14,1735328473),l,c,s[y+12],20,-1926607734),f=g(f,l=g(l,c=g(c,h,f,l,s[y+5],4,-378558),h,f,s[y+8],11,-2022574463),c,h,s[y+11],16,1839030562),l,c,s[y+14],23,-35309556),f=g(f,l=g(l,c=g(c,h,f,l,s[y+1],4,-1530992060),h,f,s[y+4],11,1272893353),c,h,s[y+7],16,-155497632),l,c,s[y+10],23,-1094730640),f=g(f,l=g(l,c=g(c,h,f,l,s[y+13],4,681279174),h,f,s[y+0],11,-358537222),c,h,s[y+3],16,-722521979),l,c,s[y+6],23,76029189),f=g(f,l=g(l,c=g(c,h,f,l,s[y+9],4,-640364487),h,f,s[y+12],11,-421815835),c,h,s[y+15],16,530742520),l,c,s[y+2],23,-995338651),f=d(f,l=d(l,c=d(c,h,f,l,s[y+0],6,-198630844),h,f,s[y+7],10,1126891415),c,h,s[y+14],15,-1416354905),l,c,s[y+5],21,-57434055),f=d(f,l=d(l,c=d(c,h,f,l,s[y+12],6,1700485571),h,f,s[y+3],10,-1894986606),c,h,s[y+10],15,-1051523),l,c,s[y+1],21,-2054922799),f=d(f,l=d(l,c=d(c,h,f,l,s[y+8],6,1873313359),h,f,s[y+15],10,-30611744),c,h,s[y+6],15,-1560198380),l,c,s[y+13],21,1309151649),f=d(f,l=d(l,c=d(c,h,f,l,s[y+4],6,-145523070),h,f,s[y+11],10,-1120210379),c,h,s[y+2],15,718787259),l,c,s[y+9],21,-343485551),c=c+m>>>0,h=h+w>>>0,f=f+k>>>0,l=l+b>>>0}return n.endian([c,h,f,l])};o._ff=function(t,n,e,r,i,o,u){var s=t+(n&e|~n&r)+(i>>>0)+u;return(s<<o|s>>>32-o)+n},o._gg=function(t,n,e,r,i,o,u){var s=t+(n&r|e&~r)+(i>>>0)+u;return(s<<o|s>>>32-o)+n},o._hh=function(t,n,e,r,i,o,u){var s=t+(n^e^r)+(i>>>0)+u;return(s<<o|s>>>32-o)+n},o._ii=function(t,n,e,r,i,o,u){var s=t+(e^(n|~r))+(i>>>0)+u;return(s<<o|s>>>32-o)+n},o._blocksize=16,o._digestsize=16,t.exports=function(t,e){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(o(t,e));return e&&e.asBytes?r:e&&e.asString?i.bytesToString(r):n.bytesToHex(r)}}()}),{'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"}),V=function(t){throw{name:"SyntaxError",message:t,at:X,text:void 0}},J=function(t){return t&&t!==Y&&V("Expected '"+t+"' instead of '"+Y+"'"),Y=(void 0).charAt(X),X+=1,Y},K=function(){var t,n="";for("-"===Y&&(n="-",J("-"));Y>="0"&&Y<="9";)n+=Y,J();if("."===Y)for(n+=".";J()&&Y>="0"&&Y<="9";)n+=Y;if("e"===Y||"E"===Y)for(n+=Y,J(),"-"!==Y&&"+"!==Y||(n+=Y,J());Y>="0"&&Y<="9";)n+=Y,J();if(t=+n,isFinite(t))return t;V("Bad number")},W=function(){var t,n,e,r="";if('"'===Y)for(;J();){if('"'===Y)return J(),r;if("\\"===Y)if(J(),"u"===Y){for(e=0,n=0;n<4&&(t=parseInt(J(),16),isFinite(t));n+=1)e=16*e+t;r+=String.fromCharCode(e)}else{if("string"!=typeof H[Y])break;r+=H[Y]}else r+=Y}V("Bad string")},Q=function(){for(;Y&&Y<=" ";)J()},$=function(){switch(Y){case"t":return J("t"),J("r"),J("u"),J("e"),!0;case"f":return J("f"),J("a"),J("l"),J("s"),J("e"),!1;case"n":return J("n"),J("u"),J("l"),J("l"),null}V("Unexpected '"+Y+"'")},tt=function(){var t=[];if("["===Y){if(J("["),Q(),"]"===Y)return J("]"),t;for(;Y;){if(t.push(L()),Q(),"]"===Y)return J("]"),t;J(","),Q()}}V("Bad array")},nt=function(){var t,n={};if("{"===Y){if(J("{"),Q(),"}"===Y)return J("}"),n;for(;Y;){if(t=W(),Q(),J(":"),Object.hasOwnProperty.call(n,t)&&V('Duplicate key "'+t+'"'),n[t]=L(),Q(),"}"===Y)return J("}"),n;J(","),Q()}}V("Bad object")};L=function(){switch(Q(),Y){case"{":return nt();case"[":return tt();case'"':return W();case"-":return K();default:return Y>="0"&&Y<="9"?K():$()}},Object.setPrototypeOf(u,Error),(u.prototype=Object.create(Error.prototype)).name="ImplementationError",u.prototype.message="",u.prototype.constructor=u;var et=n("Multiton"),rt=(function(){function t(n){if(S(this,t),this.constructor.has(n))throw new Error('Attempt to create multiple instances for key "'+n+'"')}j(t,null,[{key:"has",value:function(t){var n=et(this);if(void 0===n.instances)return!1;var e=this.coerceMultitonKey(t);return void 0!==n.instances[e]}},{key:"for",value:function(t){var n=et(this);n.instances||(n.instances=new Map);var e=this.coerceMultitonKey(t);if(n.instances.has(e))return n.instances.get(e);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var u=new(Function.prototype.bind.apply(this,[null].concat([e],i)));return n.instances.set(e,u),u}},{key:"coerceMultitonKey",value:function(t){return t}}])}(),function(t,n){if(n=n.split(":")[0],!(t=+t))return!1;switch(n){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}),it=Object.prototype.hasOwnProperty,ot={stringify:function(t,n){var e=[];"string"!=typeof(n=n||"")&&(n="?");for(var r in t)it.call(t,r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.length?n+e.join("&"):""},parse:function(t){for(var n,e=/([^=?&]+)=?([^&]*)/g,r={};n=e.exec(t);r[s(n[1])]=s(n[2]));return r}},ut=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,st=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,at=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ct={hash:1,query:1};f.prototype={set:function(t,n,e){var r=this;switch(t){case"query":"string"==typeof n&&n.length&&(n=(e||ot.parse)(n)),r[t]=n;break;case"port":r[t]=n,rt(n,r.protocol)?n&&(r.host=r.hostname+":"+n):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=n,r.port&&(n+=":"+r.port),r.host=n;break;case"host":r[t]=n,/:\d+$/.test(n)?(n=n.split(":"),r.port=n.pop(),r.hostname=n.join(":")):(r.hostname=n,r.port="");break;case"protocol":r.protocol=n.toLowerCase(),r.slashes=!e;break;case"pathname":r.pathname=n.length&&"/"!==n.charAt(0)?"/"+n:n;break;default:r[t]=n}for(var i=0;i<at.length;i++){var o=at[i];o[4]&&(r[o[1]]=r[o[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(t){t&&"function"==typeof t||(t=ot.stringify);var n,e=this,r=e.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(e.slashes?"//":"");return e.username&&(i+=e.username,e.password&&(i+=":"+e.password),i+="@"),i+=e.host+e.pathname,(n="object"===M(e.query)?t(e.query):e.query)&&(i+="?"!==n.charAt(0)?"?"+n:n),e.hash&&(i+=e.hash),i}},f.extractProtocol=c,f.location=a,f.qs=ot;var ht=f,ft=function(t){function n(){return S(this,n),T(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return G(n,ht),n}(),lt=void 0,yt=void 0;if("node"===z.type){var vt=require("fs");lt=vt.readFile,yt=require("request")}!function(){function t(){S(this,t)}j(t,null,[{key:"text",value:function(){var t=p.apply(void 0,arguments),n=E(t,2),e=n[0],r=n[1];return r.type="text",v(e,r)}},{key:"json",value:function(){var t=p.apply(void 0,arguments),n=E(t,2),e=n[0],r=n[1];return r.type="json",v(e,r)}},{key:"buffer",value:function(){var t=p.apply(void 0,arguments),n=E(t,2),e=n[0],r=n[1];return r.type="arraybuffer",r.encoding=null,v(e,r)}},{key:"csv",value:function(){var t=p.apply(void 0,arguments),n=E(t,2),e=n[0],r=n[1];return this.text(e,r).then(function(t){return z.self.d3.csvParse(t,r.row)})}},{key:"tsv",value:function(){var t=p.apply(void 0,arguments),n=E(t,2),e=n[0],r=n[1];return this.text(e,r).then(function(t){return z.self.d3.tsvParse(t,r.row)})}}])}();var pt=n("Semaphore"),gt=function t(n,e){var r=this;S(this,t);var i=[new Promise(function(t,n){r.resolve=t,r.reject=n}),new Promise(function(t){r.let=t}).then(function(){e(r.resolve,r.reject)})];this.promise=Promise.all(i).then(function(t){return n.signal(),t[0]},function(t){return n.signal(),Promise.reject(t)})},dt=(function(){function t(n){S(this,t);var e=pt(this);e.capacity=n,e.available=n,e.queue=[]}j(t,[{key:"wait",value:function(t){var n=pt(this),e=new gt(this,t);return 0===n.available?n.queue.push(e):(--n.available,e.let()),e.promise}},{key:"signal",value:function(){var t=pt(this);0===t.queue.length?++t.available:t.queue.shift().let()}},{key:"capacity",get:function(){return pt(this).capacity}},{key:"available",get:function(){return pt(this).available}}])}(),n("Singleton")),mt=(function(){function t(){if(S(this,t),void 0!==dt(this.constructor).instance)throw new Error("Attempt to create multiple instances for singleton")}j(t,null,[{key:"get",value:function(){var t=dt(this);if(void 0===t.instance){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];t.instance=new(Function.prototype.bind.apply(this,[null].concat(e)))}return t.instance}}])}(),function(){function t(){S(this,t)}j(t,null,[{key:"transform",value:function(t,n,e){var r=[];return t.forEach(function(i,o){var u=o%n;if(r[u]=i,u===n-1)for(var s=e.apply(void 0,r.concat([Math.floor(o/n)])),a=0;a<n;++a)t[o-(n-a-1)]=s[a]}),t}},{key:"forEach",value:function(t,n,e){var r=[];t.forEach(function(t,i){var o=i%n;r[o]=t,o===n-1&&e.apply(void 0,r.concat([Math.floor(i/n)]))})}},{key:"some",value:function(t,n,e){var r=[];return t.some(function(t,i){var o=i%n;return r[o]=t,o===n-1&&e.apply(void 0,r.concat([Math.floor(i/n)]))})}},{key:"every",value:function(t,n,e){var r=[];return t.every(function(t,i){var o=i%n;return r[o]=t,o!==n-1||e.apply(void 0,r.concat([Math.floor(i/n)]))})}},{key:"reduce",value:function(t,n,e,r){var i=[];return t.reduce(function(t,r,o){var u=o%n;return i[u]=r,u===n-1?e.apply(void 0,[t].concat(i,[Math.floor(o/n)])):t},r)}}])}(),r(function(t,n){!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),r=0;r<t.length;r++)e[t.charCodeAt(r)]=r;n.encode=function(n){var e,r=new Uint8Array(n),i=r.length,o="";for(e=0;e<i;e+=3)o+=t[r[e]>>2],o+=t[(3&r[e])<<4|r[e+1]>>4],o+=t[(15&r[e+1])<<2|r[e+2]>>6],o+=t[63&r[e+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(t){var n,r,i,o,u,s=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var h=new ArrayBuffer(s),f=new Uint8Array(h);for(n=0;n<a;n+=4)r=e[t.charCodeAt(n)],i=e[t.charCodeAt(n+1)],o=e[t.charCodeAt(n+2)],u=e[t.charCodeAt(n+3)],f[c++]=r<<2|i>>4,f[c++]=(15&i)<<4|o>>2,f[c++]=(3&o)<<6|63&u;return h}}()}));if("node"===z.type){var wt=require("text-encoding");void 0===z.self.TextEncoder&&(z.self.TextEncoder=wt.TextEncoder),void 0===z.self.TextDecoder&&(z.self.TextDecoder=wt.TextDecoder)}!function(){function t(){S(this,t)}j(t,null,[{key:"encode",value:function(t){if("function"!=typeof TextEncoder)throw new Error("TextEncoder is missing");var n=new TextEncoder,e=JSON.stringify(t);return n.encode(e).buffer}},{key:"decode",value:function(t){if("function"!=typeof TextDecoder)throw new Error("TextDecoder is missing");var n=new TextDecoder,e=new DataView(t),r=n.decode(e);return JSON.parse(r)}},{key:"pack",value:function(t){return mt.encode(t)}},{key:"unpack",value:function(t){return mt.decode(t)}},{key:"packBufferGeometry",value:function(t){var n=this;Object.values(t.data.attributes).forEach(function(t){var e=new(0,z.self[t.type])(t.array).buffer;t.array=n.pack(e)})}},{key:"unpackBufferGeometry",value:function(t){var n=this;Object.values(t.data.attributes).forEach(function(t){var e=z.self[t.type],r=n.unpack(t.array);t.array=Array.from(new e(r))})}}])}();var kt,bt=D.crypto||D.msCrypto;if(bt&&bt.getRandomValues){var xt=new Uint8Array(16);kt=function(){return bt.getRandomValues(xt),xt}}if(!kt){var At=new Array(16);kt=function(){for(var t,n=0;n<16;n++)0==(3&n)&&(t=4294967296*Math.random()),At[n]=t>>>((3&n)<<3)&255;return At}}for(var Bt=kt,Rt=[],Mt=0;Mt<256;++Mt)Rt[Mt]=(Mt+256).toString(16).substr(1);var St=Bt(),jt=(St[0],St[1],St[2],St[3],St[4],St[5],St[6],St[7],{get identity(){return[1,0,0,0,1,0,0,0,1]},equals:function(t,n){return t===n||!(!Array.isArray(t)||!Array.isArray(n))&&(t.length===n.length&&t.every(function(t,e){return t===n[e]}))},transform:function(t,n){var e=E(n,3),r=e[0],i=e[1],o=e[2];return[t[0]*r+t[1]*i+t[2]*o,t[3]*r+t[4]*i+t[5]*o,t[6]*r+t[7]*i+t[8]*o]},multiply:function(t,n){var e=E(t,9),r=e[0],i=e[1],o=e[2],u=e[3],s=e[4],a=e[5],c=e[6],h=e[7],f=e[8],l=E(n,9),y=l[0],v=l[1],p=l[2],g=l[3],d=l[4],m=l[5],w=l[6],k=l[7],b=l[8];return[r*y+i*g+o*w,r*v+i*d+o*k,r*p+i*m+o*b,u*y+s*g+a*w,u*v+s*d+a*k,u*p+s*m+a*b,c*y+h*g+f*w,c*v+h*d+f*k,c*p+h*m+f*b]},invert:function(t){var n=E(t,9),e=n[0],r=n[1],i=n[2],o=n[3],u=n[4],s=n[5],a=n[6],c=n[7],h=n[8],f=u*h-s*c,l=s*a-o*h,y=o*c-u*a,v=e*f+r*l+i*y;if(0===v)throw new Error;return[f/v,(i*c-r*h)/v,(r*s-i*u)/v,l/v,(e*h-i*a)/v,(i*o-e*s)/v,y/v,(r*a-e*c)/v,(e*u-r*o)/v]}}),Gt=n("Tristimulus"),Tt=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;S(this,t);var r=Gt(this),i=n.x,o=n.y;r.y=e;var u=e/o;r.x=u*i,r.z=u*(1-i-o)}return j(t,[{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["x","y","z"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"x",get:function(){return Gt(this).x}},{key:"y",get:function(){return Gt(this).y}},{key:"z",get:function(){return Gt(this).z}}]),t}(),Et=n("ChromaticAdaptation"),qt=function(){function t(n,e){S(this,t);var r=Et(this);r.matrix=n,r.inverseMatrix=e||jt.invert(n),r.transformations=new Map}return j(t,[{key:"transformation",value:function(t,n){var e=Et(this),r=Array.from(e.transformations.keys()).find(function(e){return t.equals(e.source)&&n.equals(e.destination)}),i=void 0;if(r)i=e.transformations.get(r);else{var o=new Tt(t).toArray(),u=E(o,3),s=u[0],a=u[1],c=u[2],h=new Tt(n).toArray(),f=E(h,3),l=f[0],y=f[1],v=f[2],p=jt.transform(this.matrix,[s,a,c]),g=jt.transform(this.matrix,[l,y,v]);i=jt.multiply(this.inverseMatrix,[g[0]/p[0],0,0,0,g[1]/p[1],0,0,0,g[2]/p[2]]),i=jt.multiply(i,this.matrix),e.transformations.set({source:t,destination:n},i)}return i}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["matrix","inverseMatrix"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"matrix",get:function(){var t=Et(this);return[].concat(q(t.matrix))}},{key:"inverseMatrix",get:function(){var t=Et(this);return[].concat(q(t.inverseMatrix))}}],[{key:"new",value:function(t,n){var e=Et(this);e.instances||(e.instances=new Map);var r=Array.from(e.instances.keys()).find(function(e){return jt.equals(t,e.matrix)&&jt.equals(n,e.inverseMatrix)}),i=void 0;return r?i=e.instances.get(r):(i=new this(t,n),e.instances.set({matrix:t,inverseMatrix:n},i)),i}}]),t}();Object.assign(qt,{XYZ:qt.new(jt.identity,jt.identity),Bradford:qt.new([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),VonKries:qt.new([.4002,.7076,-.0808,-.2263,1.1653,.0457,0,0,.9182]),CIECAM97:qt.new([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),CIECAM02:qt.new([.7328,.4296,-.1624,-.7036,1.6975,.0061,.003,.0136,.9834])});var Ct=n("Chromaticity"),Ot=function(){function t(n,e){S(this,t);var r=Ct(this);r.x=n,r.y=e}return j(t,[{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"toArray",value:function(){return[this.x,this.y]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["x","y"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"x",get:function(){return Ct(this).x}},{key:"y",get:function(){return Ct(this).y}},{key:"z",get:function(){var t=Ct(this);return 1-t.x-t.y}}]),t}(),Ft=function(t){function n(){return S(this,n),T(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return G(n,Ot),n}();Object.assign(Ft,{A:new Ft(.44757,.40745),B:new Ft(.34842,.35161),C:new Ft(.31006,.31616),D50:new Ft(.34567,.3585),D55:new Ft(.33242,.34743),D65:new Ft(.31271,.32902),D75:new Ft(.29902,.31485),E:new Ft(1/3,1/3),F1:new Ft(.3131,.33727),F2:new Ft(.37208,.37529),F3:new Ft(.4091,.3943),F4:new Ft(.44018,.40329),F5:new Ft(.31379,.34531),F6:new Ft(.3779,.38835),F7:new Ft(.31292,.32933),F8:new Ft(.34588,.35875),F9:new Ft(.37417,.37281),F10:new Ft(.34609,.35986),F11:new Ft(.38052,.37713),F12:new Ft(.43695,.40441)});var zt=n("Primaries"),Pt=function(){function t(n,e,r,i){S(this,t);var o=zt(this);o.r=n,o.g=e,o.b=r,o.w=i}return j(t,[{key:"toArray",value:function(){return[this.r,this.g,this.b,this.w]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["r","g","b","w"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"r",get:function(){return zt(this).r}},{key:"g",get:function(){return zt(this).g}},{key:"b",get:function(){return zt(this).b}},{key:"w",get:function(){return zt(this).w}},{key:"red",get:function(){return this.r}},{key:"green",get:function(){return this.g}},{key:"blue",get:function(){return this.b}},{key:"white",get:function(){return this.w}}]),t}();Object.assign(Pt,{sRGB:new Pt(new Ot(.64,.33),new Ot(.3,.6),new Ot(.15,.06),new Ft(.3127,.329)),AdobeRGB:new Pt(new Ot(.64,.33),new Ot(.21,.71),new Ot(.15,.06),new Ft(.3127,.329))});var Zt=n("RGB"),Xt=function(){function t(){S(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=[].concat(e),o=Zt(this);if(e[e.length-1]instanceof Pt?o.primaries=i.pop():o.primaries=Pt.sRGB,0===i.length)this.r=0,this.g=0,this.b=0;else if(1===i.length){var u=E(i,1)[0];this.r=u||0,this.g=u||0,this.b=u||0}else{var s=E(i,3),a=s[0],c=s[1],h=s[2];this.r=a||0,this.g=c||0,this.b=h||0}}return j(t,[{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"toArray",value:function(){return[this.r,this.g,this.b]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["r","g","b"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"red",get:function(){return this.r},set:function(t){this.r=t}},{key:"green",get:function(){return this.g},set:function(t){this.g=t}},{key:"blue",get:function(){return this.b},set:function(t){this.b=t}},{key:"primaries",get:function(){return Zt(this).primaries}}]),t}(),Yt=function(){function t(){S(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];if(0===e.length)this.h=0,this.s=0,this.l=0;else if(1===e.length){var i=e[0];this.h=0,this.s=0,this.l=i||0}else{var o=e[0],u=e[1],s=e[2];this.h=o||0,this.s=u||0,this.l=s||0}}return j(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt.sRGB;return new(Function.prototype.bind.apply(Xt,[null].concat(q(d(this.toArray())),[t])))}},{key:"equals",value:function(t){return t.h===this.h&&t.s===this.s&&t.l===this.l}},{key:"toArray",value:function(){return[this.h,this.s,this.l]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["h","s","l"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"hue",get:function(){return this.h},set:function(t){this.h=t}},{key:"saturation",get:function(){return this.s},set:function(t){this.s=t}},{key:"lightness",get:function(){return this.l},set:function(t){this.l=t}}],[{key:"fromRGB",value:function(t){return new(Function.prototype.bind.apply(this,[null].concat(q(g(t.toArray())))))}}]),t}(),Lt=function(){function t(){S(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];if(0===e.length)this.h=0,this.s=0,this.v=0;else if(1===e.length){var i=e[0];this.h=0,this.s=0,this.v=i||0}else{var o=e[0],u=e[1],s=e[2];this.h=o||0,this.s=u||0,this.v=s||0}}return j(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt.sRGB;return new(Function.prototype.bind.apply(Xt,[null].concat(q(w(this.toArray())),[t])))}},{key:"equals",value:function(t){return t.h===this.h&&t.s===this.s&&t.v===this.v}},{key:"toArray",value:function(){return[this.h,this.s,this.v]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["h","s","v"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"hue",get:function(){return this.h},set:function(t){this.h=t}},{key:"saturation",get:function(){return this.s},set:function(t){this.s=t}},{key:"value",get:function(){return this.v},set:function(t){this.v=t}}],[{key:"fromRGB",value:function(t){return new(Function.prototype.bind.apply(this,[null].concat(q(m(t.toArray())))))}}]),t}(),Dt=n("XYZ"),_t=function(){function t(){S(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];if(0===e.length)this.x=0,this.y=0,this.z=0;else if(1===e.length){var i=e[0];this.x=0,this.y=i||0,this.z=0}else{var o=e[0],u=e[1],s=e[2];this.x=o||0,this.y=u||0,this.z=s||0}}return j(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt.sRGB,n=this.x,e=this.y,r=this.z,i=this.constructor.getXYZToRGBMatrix(t),o=i[0]*n+i[1]*e+i[2]*r,u=i[3]*n+i[4]*e+i[5]*r,s=i[6]*n+i[7]*e+i[8]*r;return new Xt(k(o),k(u),k(s),t)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["x","y","z"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}}],[{key:"fromRGB",value:function(t){var n=this.getRGBToXYZMatrix(t.primaries),e=b(t.r),r=b(t.g),i=b(t.b);return new this(n[0]*e+n[1]*r+n[2]*i,n[3]*e+n[4]*r+n[5]*i,n[6]*e+n[7]*r+n[8]*i)}},{key:"getRGBToXYZMatrix",value:function(t){var n=Dt(t);if(void 0!==n.RGBToXYZMatrix)return n.RGBToXYZMatrix;var e=new Tt(t.r).toArray(),r=E(e,3),i=r[0],o=r[1],u=r[2],s=new Tt(t.g).toArray(),a=E(s,3),c=a[0],h=a[1],f=a[2],l=new Tt(t.b).toArray(),y=E(l,3),v=y[0],p=y[1],g=y[2],d=new Tt(t.w).toArray(),m=E(d,3),w=m[0],k=m[1],b=m[2],x=jt.invert([i,c,v,o,h,p,u,f,g]),A=x[0]*w+x[1]*k+x[2]*b,B=x[3]*w+x[4]*k+x[5]*b,R=x[6]*w+x[7]*k+x[8]*b,M=qt.Bradford.transformation(t.w,Ft.D50);return n.RGBToXYZMatrix=jt.multiply(M,[A*i,B*c,R*v,A*o,B*h,R*p,A*u,B*f,R*g]),n.RGBToXYZMatrix}},{key:"getXYZToRGBMatrix",value:function(t){var n=Dt(t);return void 0!==n.XYZToRGBMatrix?n.XYZToRGBMatrix:(n.XYZToRGBMatrix=jt.invert(this.getRGBToXYZMatrix(t)),n.XYZToRGBMatrix)}}]),t}(),It=n("Lab"),Ut=function(){function t(){S(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=[].concat(e),o=It(this);if(e[e.length-1]instanceof Ft?o.illuminant=i.pop():o.illuminant=Ft.D50,0===i.length)this.l=0,this.a=0,this.b=0;else if(1===i.length){var u=E(i,1)[0];this.l=u||0,this.a=0,this.b=0}else{var s=E(i,3),a=s[0],c=s[1],h=s[2];this.l=a||0,this.a=c||0,this.b=h||0}}return j(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt.sRGB;return this.toXYZ().toRGB(t)}},{key:"toXYZ",value:function(){var t=new Tt(this.illuminant),n=(this.l+16)/116;return new _t(A(n+this.a/500)*t.x,A(n)*t.y,A(n-this.b/200)*t.z)}},{key:"equals",value:function(t){return t.l===this.l&&t.a===this.a&&t.b===this.b}},{key:"toArray",value:function(){return[this.l,this.a,this.b]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["l","a","b"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"lightness",get:function(){return this.l},set:function(t){this.l=t}},{key:"illuminant",get:function(){return It(this).illuminant}}],[{key:"fromRGB",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft.D50;return this.fromXYZ(_t.fromRGB(t),n)}},{key:"fromXYZ",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft.D50,e=new Tt(n),r=x(t.y/e.y);return new this(116*r-16,500*(x(t.x/e.x)-r),200*(r-x(t.z/e.z)),n)}}]),t}(),Nt=n("LChab"),Ht=function(){function t(){S(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=[].concat(e),o=Nt(this);if(e[e.length-1]instanceof Ft?o.illuminant=i.pop():o.illuminant=Ft.D50,0===i.length)this.l=0,this.c=0,this.h=0;else if(1===i.length){var u=E(i,1)[0];this.l=u||0,this.c=0,this.h=0}else{var s=E(i,3),a=s[0],c=s[1],h=s[2];this.l=a||0,this.c=c||0,this.h=h||0}}return j(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt.sRGB;return this.toLab().toRGB(t)}},{key:"toLab",value:function(){var t=this.l,n=this.c,e=this.h,r=this.illuminant;return new Ut(t,n*Math.cos(e),n*Math.sin(e),r)}},{key:"equals",value:function(t){return t.l===this.l&&t.c===this.c&&t.h===this.h}},{key:"toArray",value:function(){return[this.l,this.c,this.h]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["l","c","h"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"lightness",get:function(){return this.l},set:function(t){this.l=t}},{key:"chroma",get:function(){return this.c},set:function(t){this.c=t}},{key:"hue",get:function(){return this.h},set:function(t){this.h=t}},{key:"illuminant",get:function(){return Nt(this).illuminant}}],[{key:"fromRGB",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft.D50;return this.fromLab(Ut.fromRGB(t,n))}},{key:"fromLab",value:function(t){var n=t.l,e=t.a,r=t.b,i=t.illuminant;return new this(n,Math.sqrt(e*e+r*r),Math.atan2(r,e),i)}}]),t}(),Vt=n("Luv"),Jt=function(){function t(){S(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=[].concat(e),o=Vt(this);if(e[e.length-1]instanceof Ft?o.illuminant=i.pop():o.illuminant=Ft.D50,0===i.length)this.l=0,this.u=0,this.v=0;else if(1===i.length){var u=E(i,1)[0];this.l=u||0,this.u=0,this.v=0}else{var s=E(i,3),a=s[0],c=s[1],h=s[2];this.l=a||0,this.u=c||0,this.v=h||0}}return j(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt.sRGB;return this.toXYZ().toRGB(t)}},{key:"toXYZ",value:function(){var t=new Tt(this.illuminant),n=t.x+15*t.y+3*t.z,e=4*t.x/n,r=9*t.y/n,i=void 0;i=this.l>8?Math.pow((this.l+16)/116,3):this.l/(24389/27);var o=(52*this.l/(this.u+13*this.l*e)-1)/3,u=-5*i,s=(i*(39*this.l/(this.v+13*this.l*r)-5)-u)/(o- -1/3);return new _t(s,i,s*o+u)}},{key:"equals",value:function(t){return t.l===this.l&&t.u===this.u&&t.v===this.v}},{key:"toArray",value:function(){return[this.l,this.u,this.v]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["l","u","v"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"lightness",get:function(){return this.l},set:function(t){this.l=t}},{key:"illuminant",get:function(){return Vt(this).illuminant}}],[{key:"fromRGB",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft.D50;return this.fromXYZ(_t.fromRGB(t),n)}},{key:"fromXYZ",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft.D50,e=new Tt(n),r=void 0;r=e.y>216/24389?116*Math.pow(e.y,-3)-16:24389/27*e.y;var i=t.x+15*t.y+3*t.z,o=4*t.x/i,u=9*t.y/i,s=e.x+15*e.y+3*e.z;return new this(r,13*r*(o-4*e.x/s),13*r*(u-9*e.y/s))}}]),t}(),Kt=n("LChuv"),Wt=function(){function t(){S(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=[].concat(e),o=Kt(this);if(e[e.length-1]instanceof Ft?o.illuminant=i.pop():o.illuminant=Ft.D50,0===i.length)this.l=0,this.c=0,this.h=0;else if(1===i.length){var u=E(i,1)[0];this.l=u||0,this.c=0,this.h=0}else{var s=E(i,3),a=s[0],c=s[1],h=s[2];this.l=a||0,this.c=c||0,this.h=h||0}}return j(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt.sRGB;return this.toLuv().toRGB(t)}},{key:"toLuv",value:function(){var t=this.l,n=this.c,e=this.h,r=this.illuminant;return new Jt(t,n*Math.cos(e),n*Math.sin(e),r)}},{key:"equals",value:function(t){return t.l===this.l&&t.c===this.c&&t.h===this.h}},{key:"toArray",value:function(){return[this.l,this.c,this.h]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["l","c","h"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"lightness",get:function(){return this.l},set:function(t){this.l=t}},{key:"chroma",get:function(){return this.c},set:function(t){this.c=t}},{key:"hue",get:function(){return this.h},set:function(t){this.h=t}},{key:"illuminant",get:function(){return Kt(this).illuminant}}],[{key:"fromRGB",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft.D50;return this.fromLuv(Jt.fromRGB(t,n))}},{key:"fromLuv",value:function(t){var n=t.l,e=t.u,r=t.v,i=t.illuminant;return new this(n,Math.sqrt(e*e+r*r),Math.atan2(r,e),i)}}]),t}(),Qt=function(){function t(){S(this,t);for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];if(0===e.length)this.r=0,this.y=0,this.b=0;else if(1===e.length){var i=e[0];this.r=i||0,this.y=i||0,this.b=i||0}else{var o=e[0],u=e[1],s=e[2];this.r=o||0,this.y=u||0,this.b=s||0}}return j(t,[{key:"toRGB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt.sRGB;return new(Function.prototype.bind.apply(Xt,[null].concat(q(R(this.toArray())),[t])))}},{key:"equals",value:function(t){return t.r===this.r&&t.y===this.y&&t.b===this.b}},{key:"toArray",value:function(){return[this.r,this.y,this.b]}},{key:"toString",value:function(){var t=this;return this.constructor.name+" { "+["r","y","b"].map(function(n){return n+": "+t[n]}).join(", ")+" }"}},{key:"inspect",value:function(){return this.toString()}},{key:"red",get:function(){return this.r},set:function(t){this.r=t}},{key:"yellow",get:function(){return this.y},set:function(t){this.y=t}},{key:"blue",get:function(){return this.b},set:function(t){this.b=t}}],[{key:"fromRGB",value:function(t){return new(Function.prototype.bind.apply(this,[null].concat(q(B(t.toArray())))))}}]),t}();t.ChromaticAdaptation=qt,t.Chromaticity=Ot,t.HSL=Yt,t.HSV=Lt,t.Illuminant=Ft,t.Lab=Ut,t.LChab=Ht,t.LChuv=Wt,t.Luv=Jt,t.Primaries=Pt,t.RGB=Xt,t.RYB=Qt,t.Tristimulus=Tt,t.XYZ=_t,Object.defineProperty(t,"__esModule",{value:!0})});